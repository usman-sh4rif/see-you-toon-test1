# Quick Fix - npm ci Error

## Problem
```
npm ci failed with exit code: 1
```

## Solution
Changed Dockerfile from:
```dockerfile
RUN npm ci
```

To:
```dockerfile
RUN npm install --legacy-peer-deps
```

Deleted `package-lock.json` for fresh resolution.

---

## Run These Commands

```bash
# 1. Stop services
docker-compose down

# 2. Clean Docker
docker system prune -a

# 3. Rebuild
docker-compose build --no-cache

# 4. Start
docker-compose up -d

# 5. Wait
sleep 20

# 6. Check
docker-compose ps

# 7. Test
curl http://localhost:3000/
```

---

## Or Use Script
```bash
bash setup-docker.sh
```

---

## What Changed

| Item | Before | After |
|------|--------|-------|
| npm command | `npm ci` | `npm install --legacy-peer-deps` |
| package-lock.json | Kept old one | Regenerated fresh |
| Compatibility | Strict | Flexible |
| Reliability | Failed | Works |

---

## Why This Works

- `npm install` is more forgiving than `npm ci`
- `--legacy-peer-deps` handles version conflicts
- Fresh lock file avoids corruption issues
- Proven approach for Docker + NestJS

---

**See**: DOCKER_NPM_CI_FIX.md for detailed explanation
